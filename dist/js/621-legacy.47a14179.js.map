{"version":3,"file":"js/621-legacy.47a14179.js","mappings":"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","sources":["webpack://wore-house-orders/./src/views/FmenNearPlan.vue?a336","webpack://wore-house-orders/src/views/FmenNearPlan.vue","webpack://wore-house-orders/./src/views/FmenNearPlan.vue?bfc9","webpack://wore-house-orders/./src/views/FmenNearPlan.vue"],"sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"WareHouseMain\"},[_vm._m(0),_c('div',{staticClass:\"input-card-box\"},[_c('div',{staticClass:\"input-item\"},[_c('input',{attrs:{\"type\":\"checkbox\"},on:{\"click\":function($event){return _vm.toggleScale()}}}),_vm._v(\"比例尺 \")]),_c('div',{staticClass:\"input-item\"},[_c('input',{attrs:{\"type\":\"checkbox\",\"id\":\"toolbar\"},on:{\"click\":function($event){return _vm.toggleToolBar()}}}),_vm._v(\"工具条 \")]),_c('div',{staticClass:\"mapImg\"},[_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.nearvalue),callback:function ($$v) {_vm.nearvalue=$$v},expression:\"nearvalue\"}},_vm._l((_vm.options),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1),(_vm.isOrdMap)?_c('el-button',{staticStyle:{\"margin-left\":\"15px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.addRoadLayer}},[_vm._v(\"打开卫星图层\")]):_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.removeSatellite}},[_vm._v(\"关闭卫星图层\")]),(_vm.nearData.length)?_c('el-button',{staticClass:\"nearRoad\",staticStyle:{\"margin-left\":\"15px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.planNearRoad}},[_vm._v(\"规划最短救援路径\")]):_vm._e()],1)])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"map-box\"},[_c('div',{staticClass:\"container\",attrs:{\"id\":\"container\"}},[_c('div',{attrs:{\"id\":\"panel\"}})])])}]\n\nexport { render, staticRenderFns }","<template>\r\n  <!-- 仓库图层 -->\r\n  <div class=\"WareHouseMain\">\r\n    <div class=\"map-box\">\r\n      <div id=\"container\" class=\"container\">\r\n        <div id=\"panel\"></div>\r\n      </div>\r\n    </div>\r\n    <!-- 工具条start -->\r\n    <div class=\"input-card-box\">\r\n      <div class=\"input-item\">\r\n        <input type=\"checkbox\" @click=\"toggleScale()\" />比例尺\r\n      </div>\r\n      <div class=\"input-item\">\r\n        <input type=\"checkbox\" id=\"toolbar\" @click=\"toggleToolBar()\" />工具条\r\n      </div>\r\n      <div class=\"mapImg\">\r\n        <el-select v-model=\"nearvalue\" placeholder=\"请选择\">\r\n          <el-option\r\n            v-for=\"item in options\"\r\n            :key=\"item.value\"\r\n            :label=\"item.label\"\r\n            :value=\"item.value\"\r\n          >\r\n          </el-option>\r\n        </el-select>\r\n\r\n        <el-button\r\n          style=\"margin-left: 15px\"\r\n          type=\"primary\"\r\n          v-if=\"isOrdMap\"\r\n          @click=\"addRoadLayer\"\r\n          >打开卫星图层</el-button\r\n        >\r\n        <el-button type=\"primary\" v-else @click=\"removeSatellite\"\r\n          >关闭卫星图层</el-button\r\n        >\r\n        <el-button\r\n          class=\"nearRoad\"\r\n          style=\"margin-left: 15px\"\r\n          type=\"primary\"\r\n          v-if=\"nearData.length\"\r\n          @click=\"planNearRoad\"\r\n          >规划最短救援路径</el-button\r\n        >\r\n      </div>\r\n    </div>\r\n    <!-- 工具条end -->\r\n  </div>\r\n</template>\r\n<script type=\"text/javascript\">\r\nwindow._AMapSecurityConfig = {\r\n  securityJsCode: \"5885da62a0da2ca7cf5d212e6b671140\",\r\n};\r\n</script>\r\n<script type=\"text/javascript\" src=\"https://webapi.amap.com/maps?v=1.4.15&key=84f61226c5c3819011a303ef5c321e5f&plugin=AMap.MouseTool,AMap.HawkEye,AMap.DistrictSearch,AMap.Scale,AMap.ToolBar,AMap.ControlBar,AMap.ImageLayer,AMap.Driving\"></script>\r\n\r\n<script>\r\nimport { mapState } from \"vuex\";\r\n\r\nexport default {\r\n  name: \"WareHouseMain\",\r\n  data() {\r\n    return {\r\n      map: \"\", //地图实例\r\n      lang: \"zh_cn\",\r\n      // 弹框内容\r\n      zoom: 10,\r\n      title: \"\",\r\n      coon: [],\r\n      content: [],\r\n      infoWindow: null,\r\n      markers: [],\r\n\r\n      //工具条\r\n      scale: null,\r\n      isScale: false,\r\n      toolBar: null,\r\n      isToolBar: false,\r\n      overView: null,\r\n      isoverView: false,\r\n      nowMapImg: {\r\n        title: \"\",\r\n        src: \"\",\r\n        type: \"\",\r\n      }, //当前显示的仓库地图\r\n\r\n      satellite: null,\r\n      isOrdMap: true,\r\n\r\n      options: [\r\n        {\r\n          label: \"3公里\",\r\n          value: 3000,\r\n        },\r\n        {\r\n          label: \"5公里\",\r\n          value: 5000,\r\n        },\r\n        {\r\n          label: \"10公里\",\r\n          value: 10000,\r\n        },\r\n        {\r\n          label: \"30公里\",\r\n          value: 30000,\r\n        },\r\n        {\r\n          label: \"50公里\",\r\n          value: 50000,\r\n        },\r\n      ],\r\n      nearvalue: 10000,\r\n      nearData: [],\r\n      nowFineData: null,\r\n      driving: null,\r\n\r\n      // 火灾数据\r\n      newfireData: [],\r\n    };\r\n  },\r\n  components: {},\r\n\r\n  computed: {\r\n    ...mapState([\"fireData\"]),\r\n  },\r\n\r\n  mounted() {\r\n    this.initMap();\r\n\r\n    this.addMarker();\r\n  },\r\n  async created() {\r\n    // var res = null;\r\n    console.log(this.fireData);\r\n  },\r\n\r\n  methods: {\r\n    // 118.504165, 39.02162\r\n    initMap() {\r\n      //初始化地图\r\n      this.map = new AMap.Map(\"container\", {\r\n        resizeEnable: true,\r\n        zoom: this.zoom, //级别\r\n        zooms: [7, 30],\r\n        center: [102.379164, 27.853739], //中心点坐标\r\n        viewMode: \"3D\", //使用3D视图\r\n        lang: this.lang,\r\n        mapStyle: \"amap://styles/macaron\",\r\n        infoWindow: null,\r\n      });\r\n\r\n      this.scale = new AMap.Scale({\r\n        visible: false,\r\n      });\r\n      this.map.addControl(this.scale);\r\n\r\n      this.toolBar = new AMap.ToolBar({\r\n        visible: false,\r\n        position: {\r\n          top: \"110px\",\r\n          right: \"40px\",\r\n        },\r\n      });\r\n      this.map.addControl(this.toolBar);\r\n\r\n      // this.overView = new AMap.HawkEye({\r\n      //   visible: true,\r\n      // });\r\n      // this.map.addControl(this.overView);\r\n    },\r\n\r\n    toggleScale() {\r\n      if (!this.isScale) {\r\n        this.isScale = true;\r\n        this.scale.show();\r\n      } else {\r\n        this.isScale = false;\r\n        this.scale.hide();\r\n      }\r\n    },\r\n    toggleToolBar() {\r\n      if (!this.isToolBar) {\r\n        this.isToolBar = true;\r\n        this.toolBar.show();\r\n      } else {\r\n        this.isToolBar = false;\r\n        this.toolBar.hide();\r\n      }\r\n    },\r\n\r\n    // 添加工业遗产点集\r\n    async addMarker() {\r\n      this.newfireData = this.fireData.map((ele) => {\r\n        return {\r\n          ...ele,\r\n          coordinate: [ele.jing, ele.wei],\r\n        };\r\n      });\r\n\r\n      for (let i = 0; i < this.newfireData.length; i++) {\r\n        // 循环点坐标\r\n        // 注意这里一定得用 let\r\n        let marker = new AMap.Marker({\r\n          map: this.map,\r\n          position: this.newfireData[i].coordinate,\r\n          extData: this.newfireData[i],\r\n          icon: new AMap.Icon({\r\n            image:\r\n              \"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-ae070c7f-068d-4e5c-adf5-baf6760c9a2b/9e584737-de7e-48ec-8025-d6f822668e69.png\",\r\n            size: new AMap.Size(40, 40),\r\n            imageSize: new AMap.Size(40, 40),\r\n          }),\r\n        });\r\n\r\n        this.markers.push(marker);\r\n\r\n        AMap.event.addListener(marker, \"click\", () => {\r\n          // this.nowMarker = marker;\r\n\r\n          // console.log(this.infoWindow);\r\n          this.title = \"火灾编号：\" + this.newfireData[i].index;\r\n          this.coon = this.newfireData[i].coordinate;\r\n\r\n          (this.content = [\r\n            \"火灾级别：\" + this.newfireData[i].level,\r\n            \"救援队伍规模：\" + this.newfireData[i].fmen,\r\n            \"起火原因：\" + this.newfireData[i].reason,\r\n            // \"单位名称：\" + this.newfireData[i].company,\r\n          ]),\r\n            (this.infoWindow = new AMap.InfoWindow({\r\n              isCustom: true, //使用自定义窗体\r\n              // content: '  <div style=\"background-color:white\">111</div>',\r\n              content: this.createInfoWindow(\r\n                this.title,\r\n                this.coon,\r\n                this.content.join(\"<br/>\")\r\n              ),\r\n              offset: new AMap.Pixel(16, -45),\r\n            }));\r\n          this.infoWindow.open(this.map, marker.getPosition());\r\n          // console.log(marker.getPosition());\r\n        });\r\n      }\r\n    },\r\n\r\n    //渲染遗产弹框\r\n    createInfoWindow(title, coon, content) {\r\n      // console.log(\"11111111\");\r\n      var info = document.createElement(\"div\");\r\n      info.className = \"custom-info input-card content-window-card\";\r\n\r\n      //可以通过下面的方式修改自定义窗体的宽高\r\n      //info.style.width = \"400px\";\r\n      // 定义顶部标题\r\n      var top = document.createElement(\"div\");\r\n      var titleD = document.createElement(\"div\");\r\n      var closeX = document.createElement(\"img\");\r\n      top.className = \"info-top\";\r\n      titleD.innerHTML = title;\r\n      closeX.src = \"https://webapi.amap.com/images/close2.gif\";\r\n      closeX.onclick = this.closeInfoWindow;\r\n\r\n      top.appendChild(titleD);\r\n      top.appendChild(closeX);\r\n      info.appendChild(top);\r\n\r\n      // 定义中部内容\r\n      var middle = document.createElement(\"div\");\r\n      middle.className = \"info-middle\";\r\n      middle.style.backgroundColor = \"white\";\r\n      middle.innerHTML = content;\r\n\r\n      //   自定义事件\r\n      var openMap = document.createElement(\"div\");\r\n      openMap.className = \"openMap\";\r\n      openMap.innerHTML = \"查看周边消防设施\";\r\n\r\n      openMap.onclick = () => {\r\n        this.openMapFun(coon);\r\n      };\r\n\r\n      middle.appendChild(openMap);\r\n      //   end\r\n\r\n      info.appendChild(middle);\r\n\r\n      // 定义底部内容\r\n      var bottom = document.createElement(\"div\");\r\n      bottom.className = \"info-bottom\";\r\n      bottom.style.position = \"relative\";\r\n      bottom.style.top = \"0px\";\r\n      bottom.style.margin = \"0 auto\";\r\n      var sharp = document.createElement(\"img\");\r\n      sharp.src = \"https://webapi.amap.com/images/sharp.png\";\r\n      bottom.appendChild(sharp);\r\n      info.appendChild(bottom);\r\n      return info;\r\n    },\r\n\r\n    openMapFun(coon) {\r\n      console.log(coon, this.nearvalue);\r\n      this.map.clearMap();\r\n      this.addMarker();\r\n\r\n      AMap.service([\"AMap.PlaceSearch\"], () => {\r\n        //构造地点查询类\r\n        var placeSearch = new AMap.PlaceSearch({\r\n          type: \"消防\", // 兴趣点类别\r\n          pageSize: 5, // 单页显示结果条数\r\n          pageIndex: 1, // 页码\r\n          citylimit: true, //是否强制限制在设置的城市内搜索\r\n          map: this.map, // 展现结果的地图实例\r\n          panel: \"panel\", // 结果列表将在此容器中进行展示。\r\n          autoFitView: true, // 是否自动调整地图视野使绘制的 Marker点都处于视口的可见范围\r\n        });\r\n\r\n        var cpoint = this.coon; //中心点坐标\r\n        placeSearch.searchNearBy(\r\n          \"\",\r\n          cpoint,\r\n          this.nearvalue,\r\n          (status, result) => {\r\n            console.log(\"周边结果\", result);\r\n            this.nearData = [];\r\n            console.log(this.nearData);\r\n            this.closeInfoWindow();\r\n\r\n            if (!result.info) {\r\n              this.$message({\r\n                message: \"当前范围内无符合条件救援设施，请扩大搜索范围。\",\r\n                type: \"warning\",\r\n              });\r\n            } else {\r\n              this.nearData = result.poiList.pois;\r\n            }\r\n          }\r\n        );\r\n      });\r\n    },\r\n\r\n    // 规划最短救援路径\r\n    planNearRoad() {\r\n      console.log(\"路径规划ready\", this.coon, this.nearData);\r\n      if (this.driving) {\r\n        this.driving.clear();\r\n        this.driving = null;\r\n      }\r\n\r\n      var miniJuli = null;\r\n      var miniJuliChe = null;\r\n\r\n      for (let i = 0; i < this.nearData.length; i++) {\r\n        var juli = AMap.GeometryUtil.distance(this.coon, [\r\n          this.nearData[i].location.R,\r\n          this.nearData[i].location.Q,\r\n        ]);\r\n        if (miniJuli) {\r\n          if (juli < miniJuli) {\r\n            miniJuli = juli;\r\n            miniJuliChe = this.nearData[i];\r\n          }\r\n        } else {\r\n          miniJuli = juli;\r\n          miniJuliChe = this.nearData[i];\r\n        }\r\n      }\r\n\r\n      this.driving = new AMap.Driving({\r\n        map: this.map,\r\n        // policy: AMap.DrivingPolicy.LEAST_TIME,\r\n      });\r\n\r\n      this.driving.search(\r\n        this.coon,\r\n        [miniJuliChe.location.R, miniJuliChe.location.Q],\r\n\r\n        (status, result) => {\r\n          if (status === \"complete\") {\r\n            console.log(\"绘制驾车路线完成\");\r\n            this.$notify({\r\n              title: \"成功\",\r\n              message: \"周边最近消防救援设置为：\" + miniJuliChe.name,\r\n              type: \"success\",\r\n            });\r\n          } else {\r\n            console.log(\"获取驾车数据失败：\" + result);\r\n          }\r\n        }\r\n      );\r\n    },\r\n\r\n    // 关闭遗产弹框\r\n    closeInfoWindow() {\r\n      this.map.clearInfoWindow();\r\n      // this.searchIndustry = null;\r\n    },\r\n\r\n    // 卫星地图start\r\n    addRoadLayer() {\r\n      this.isOrdMap = false;\r\n      this.satellite = new AMap.TileLayer.Satellite();\r\n      this.map.add(this.satellite);\r\n    },\r\n\r\n    // 关闭卫星地图\r\n    removeSatellite() {\r\n      this.isOrdMap = true;\r\n      this.map.remove(this.satellite);\r\n    },\r\n\r\n    // 卫星地图end\r\n  },\r\n};\r\n</script>\r\n\r\n<style >\r\n/* 弹框样式 */\r\n.content-window-card {\r\n  position: relative;\r\n  box-shadow: none;\r\n  bottom: 0;\r\n  left: 0;\r\n  width: auto;\r\n  padding: 0;\r\n}\r\n\r\n.content-window-card p {\r\n  height: 2rem;\r\n}\r\n\r\n.custom-info {\r\n  border: solid 1px silver;\r\n  width: 280px;\r\n  background-color: white;\r\n}\r\n\r\ndiv.info-top {\r\n  position: relative;\r\n  background: none repeat scroll 0 0 #f9f9f9;\r\n  border-bottom: 1px solid #ccc;\r\n  border-radius: 5px 5px 0 0;\r\n}\r\n\r\ndiv.info-top div {\r\n  display: inline-block;\r\n  color: #333333;\r\n  font-size: 14px;\r\n  font-weight: bold;\r\n  line-height: 31px;\r\n  padding: 0 10px;\r\n}\r\n\r\ndiv.info-top img {\r\n  position: absolute;\r\n  top: 10px;\r\n  right: 10px;\r\n  transition-duration: 0.25s;\r\n}\r\n\r\ndiv.info-middle {\r\n  font-size: 12px;\r\n  padding: 10px 6px;\r\n  line-height: 20px;\r\n}\r\ndiv.info-middle img {\r\n  width: 100px;\r\n  height: 70px;\r\n  padding-bottom: 10px;\r\n}\r\n\r\ndiv.info-bottom {\r\n  height: 0px;\r\n  width: 100%;\r\n  clear: both;\r\n  text-align: center;\r\n}\r\n\r\ndiv.info-bottom img {\r\n  position: relative;\r\n  z-index: 104;\r\n}\r\n\r\nspan {\r\n  margin-left: 5px;\r\n  font-size: 11px;\r\n}\r\n\r\n.info-middle img {\r\n  float: left;\r\n  margin-right: 6px;\r\n}\r\n\r\n.xiangxi {\r\n  color: #555;\r\n}\r\n\r\n.openMap {\r\n  margin: 0;\r\n  cursor: pointer;\r\n  color: #555;\r\n  user-select: none;\r\n}\r\n\r\n/*工具条样式*/\r\n.input-card-box {\r\n  width: 130px;\r\n  top: 10px;\r\n  left: 10px;\r\n  bottom: auto;\r\n  z-index: 999;\r\n  position: absolute;\r\n  top: 85px;\r\n  left: 15px;\r\n  background-color: #fff;\r\n  background-clip: border-box;\r\n  border-radius: 0.25rem;\r\n  font-size: 12px;\r\n  border-width: 0;\r\n  border-radius: 0.4rem;\r\n  box-shadow: 0 2px 6px 0 rgba(114, 124, 245, 0.5);\r\n  padding: 8px 8px;\r\n}\r\n.input-card-box .input-item {\r\n  display: flex;\r\n  align-items: center;\r\n  height: 30px;\r\n  /* line-height: 30px; */\r\n}\r\n\r\n.amap-toolbar {\r\n  position: absolute;\r\n  top: 15px;\r\n  right: 15px;\r\n}\r\n.amap-scalecontrol {\r\n  position: fixed;\r\n  /* position: absolute; */\r\n  bottom: 15px;\r\n  left: 15px !important;\r\n}\r\n\r\n.WareHouseMain .mapImg {\r\n  /* width: 350px; */\r\n  /* height: 350px; */\r\n  position: fixed;\r\n  top: 85px;\r\n  right: 90px;\r\n\r\n  /* background-color: white; */\r\n  /* background-clip: border-box;\r\n  border-radius: 0.25rem; */\r\n  font-size: 12px;\r\n  /* border-width: 0;\r\n  border-radius: 0.4rem;\r\n  box-shadow: 0 2px 6px 0 rgba(114, 124, 245, 0.5);\r\n  padding: 8px 8px; */\r\n}\r\n.WareHouseMain .mapImg span {\r\n  margin-right: 15px;\r\n}\r\n.WareHouseMain .mapImg img {\r\n  width: 100%;\r\n}\r\n\r\n#panel {\r\n  position: fixed;\r\n  background-color: white;\r\n  max-height: 90%;\r\n  overflow-y: auto;\r\n  top: 150px;\r\n  right: 15px;\r\n  width: 280px;\r\n  border-bottom: solid 1px silver;\r\n  z-index: 999;\r\n}\r\n\r\n.nearRoad {\r\n  position: absolute;\r\n  top: 450px;\r\n  right: -80px;\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./FmenNearPlan.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40[0].rules[0].use[1]!../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./FmenNearPlan.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./FmenNearPlan.vue?vue&type=template&id=65b07350&\"\nimport script from \"./FmenNearPlan.vue?vue&type=script&lang=js&\"\nexport * from \"./FmenNearPlan.vue?vue&type=script&lang=js&\"\nimport style0 from \"./FmenNearPlan.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_m","attrs","on","$event","toggleScale","_v","toggleToolBar","model","value","callback","$$v","nearvalue","expression","_l","item","key","label","staticStyle","addRoadLayer","removeSatellite","nearData","planNearRoad","_e","staticRenderFns","name","data","map","lang","zoom","title","coon","content","infoWindow","markers","scale","isScale","toolBar","isToolBar","overView","isoverView","nowMapImg","src","type","satellite","isOrdMap","options","nowFineData","driving","newfireData","components","computed","mapState","mounted","initMap","addMarker","console","methods","AMap","Map","resizeEnable","zooms","center","viewMode","mapStyle","Scale","visible","addControl","ToolBar","position","top","right","hide","show","ele","coordinate","i","extData","icon","image","size","imageSize","isCustom","offset","createInfoWindow","info","document","createElement","className","titleD","closeX","innerHTML","onclick","closeInfoWindow","appendChild","middle","style","backgroundColor","openMap","bottom","margin","sharp","openMapFun","log","clearMap","service","placeSearch","PlaceSearch","pageSize","pageIndex","citylimit","panel","autoFitView","cpoint","searchNearBy","message","clear","miniJuli","miniJuliChe","juli","GeometryUtil","distance","Driving","search","clearInfoWindow","TileLayer","Satellite","add","remove","component"],"sourceRoot":""}