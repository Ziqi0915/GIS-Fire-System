"use strict";(self["webpackChunkwore_house_orders"]=self["webpackChunkwore_house_orders"]||[]).push([[784],{5784:function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"WareHouseMain"},[e._m(0),n("div",{staticClass:"input-card-box"},[n("div",{staticClass:"input-item"},[n("input",{attrs:{type:"checkbox"},on:{click:function(t){return e.toggleScale()}}}),e._v("比例尺 ")]),n("div",{staticClass:"input-item"},[n("input",{attrs:{type:"checkbox",id:"toolbar"},on:{click:function(t){return e.toggleToolBar()}}}),e._v("工具条 ")]),n("div",{staticClass:"mapImg"},[e.isOrdMap?n("el-button",{staticStyle:{"margin-left":"15px"},attrs:{type:"primary"},on:{click:e.addRoadLayer}},[e._v("打开卫星图层")]):n("el-button",{attrs:{type:"primary"},on:{click:e.removeSatellite}},[e._v("关闭卫星图层")]),e.geometryBox?n("div",{staticClass:"geometrySearch"},[n("h2",[e._v("火灾编号："+e._s(e.boxData.index))]),n("span",[e._v("当前救援人员："+e._s(e.boxData.fmen))]),n("br"),n("span",[e._v("起火原因："+e._s(e.boxData.reason))]),n("br"),n("span",[e._v("火灾级别："+e._s(e.boxData.level))]),n("br"),n("span",[e._v("影响范围："+e._s(e.firlBuffer)+" 公里")]),n("br"),e.money?n("span",{staticStyle:{color:"red"}},[e._v("经济损失："+e._s(e.money)+" 万元")]):e._e(),n("br"),n("br"),n("el-button",{attrs:{type:"warning",size:"mini"},on:{click:e.getMoney}},[e._v("计算火灾损失")]),n("el-button",{attrs:{type:"danger",size:"mini"},on:{click:e.closeBufferBox}},[e._v("关闭面板")])],1):e._e()],1)])])},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"map-box"},[n("div",{staticClass:"container",attrs:{id:"container"}})])}],o=n(6198),r=n(3019),s=(n(1249),n(9600),n(8975),n(4665)),l={name:"WareHouseMain",data:function(){return{map:"",lang:"zh_cn",zoom:10,title:"",coon:[],content:[],infoWindow:null,markers:[],scale:null,isScale:!1,toolBar:null,isToolBar:!1,overView:null,isoverView:!1,satellite:null,isOrdMap:!0,nowFineData:null,newfireData:[],geometryBox:!1,boxData:null,firlBuffer:0,money:0}},components:{},computed:(0,r.Z)({},(0,s.rn)(["fireData"])),mounted:function(){this.initMap(),this.addMarker()},created:function(){var e=this;return(0,o.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log(e.fireData);case 1:case"end":return t.stop()}}),t)})))()},methods:{initMap:function(){this.map=new AMap.Map("container",{resizeEnable:!0,zoom:this.zoom,zooms:[7,30],center:[102.379164,27.853739],viewMode:"3D",lang:this.lang,mapStyle:"amap://styles/macaron",infoWindow:null}),this.scale=new AMap.Scale({visible:!1}),this.map.addControl(this.scale),this.toolBar=new AMap.ToolBar({visible:!1,position:{top:"110px",right:"40px"}}),this.map.addControl(this.toolBar)},toggleScale:function(){this.isScale?(this.isScale=!1,this.scale.hide()):(this.isScale=!0,this.scale.show())},toggleToolBar:function(){this.isToolBar?(this.isToolBar=!1,this.toolBar.hide()):(this.isToolBar=!0,this.toolBar.show())},addMarker:function(){var e=this;return(0,o.Z)(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(e.newfireData=e.fireData.map((function(e){return(0,r.Z)((0,r.Z)({},e),{},{coordinate:[e.jing,e.wei]})})),n=function(t){var n=new AMap.Marker({map:e.map,position:e.newfireData[t].coordinate,extData:e.newfireData[t],icon:new AMap.Icon({image:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-ae070c7f-068d-4e5c-adf5-baf6760c9a2b/9e584737-de7e-48ec-8025-d6f822668e69.png",size:new AMap.Size(40,40),imageSize:new AMap.Size(40,40)})});e.markers.push(n),AMap.event.addListener(n,"click",(function(){e.title="火灾编号："+e.newfireData[t].index,e.coon=e.newfireData[t],e.content=["火灾级别："+e.newfireData[t].level,"救援队伍规模："+e.newfireData[t].fmen,"起火原因："+e.newfireData[t].reason],e.infoWindow=new AMap.InfoWindow({isCustom:!0,content:e.createInfoWindow(e.title,e.coon,e.content.join("<br/>")),offset:new AMap.Pixel(16,-45)}),e.infoWindow.open(e.map,n.getPosition())}))},a=0;a<e.newfireData.length;a++)n(a);case 3:case"end":return t.stop()}}),t)})))()},createInfoWindow:function(e,t,n){var a=this,i=document.createElement("div");i.className="custom-info input-card content-window-card";var o=document.createElement("div"),r=document.createElement("div"),s=document.createElement("img");o.className="info-top",r.innerHTML=e,s.src="https://webapi.amap.com/images/close2.gif",s.onclick=this.closeInfoWindow,o.appendChild(r),o.appendChild(s),i.appendChild(o);var l=document.createElement("div");l.className="info-middle",l.style.backgroundColor="white",l.innerHTML=n;var c=document.createElement("div");c.className="openMap",c.innerHTML="缓冲区分析",c.onclick=function(){a.openMapFun(t)},l.appendChild(c),i.appendChild(l);var p=document.createElement("div");p.className="info-bottom",p.style.position="relative",p.style.top="0px",p.style.margin="0 auto";var d=document.createElement("img");return d.src="https://webapi.amap.com/images/sharp.png",p.appendChild(d),i.appendChild(p),i},openMapFun:function(e){console.log(e),this.map.clearMap(),this.addMarker(),this.money=0,this.geometryBox=!0,this.boxData=e,"一般事故"===e.level?this.firlBuffer=1:"较大事故"===e.level?this.firlBuffer=4:"特别重大事故"===e.level?this.firlBuffer=16:"重大事故"===e.level&&(this.firlBuffer=9);var t=new AMap.Circle({center:e.coordinate,radius:1e3*this.firlBuffer,strokeColor:"#F33",strokeOpacity:1,strokeWeight:3,fillColor:"#ee2200",fillOpacity:.35});this.map.add(t),this.map.setZoomAndCenter(12,e.coordinate)},closeBufferBox:function(){this.geometryBox=!1,this.money=0},getMoney:function(){this.money=30*this.firlBuffer},closeInfoWindow:function(){this.map.clearInfoWindow()},addRoadLayer:function(){this.isOrdMap=!1,this.satellite=new AMap.TileLayer.Satellite,this.map.add(this.satellite)},removeSatellite:function(){this.isOrdMap=!0,this.map.remove(this.satellite)}}},c=l,p=n(1001),d=(0,p.Z)(c,a,i,!1,null,null,null),u=d.exports}}]);
//# sourceMappingURL=784-legacy.f0ed2377.js.map