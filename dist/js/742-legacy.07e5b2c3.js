"use strict";(self["webpackChunkwore_house_orders"]=self["webpackChunkwore_house_orders"]||[]).push([[742],{742:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"WareHouseMain"},[e._m(0),a("div",{staticClass:"input-card-box"},[a("div",{staticClass:"input-item"},[a("input",{attrs:{type:"checkbox"},on:{click:function(t){return e.toggleScale()}}}),e._v("比例尺 ")]),a("div",{staticClass:"input-item"},[a("input",{attrs:{type:"checkbox",id:"toolbar"},on:{click:function(t){return e.toggleToolBar()}}}),e._v("工具条 ")]),a("div",{staticClass:"mapImg"},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.typevalue,callback:function(t){e.typevalue=t},expression:"typevalue"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-button",{staticStyle:{"margin-left":"15px"},attrs:{type:"primary"},on:{click:e.selectType}},[e._v("类型查询")]),e.isOrdMap?a("el-button",{attrs:{type:"primary"},on:{click:e.addRoadLayer}},[e._v("打开卫星图层")]):a("el-button",{attrs:{type:"primary"},on:{click:e.removeSatellite}},[e._v("关闭卫星图层")])],1)])])},i=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"map-box"},[a("div",{staticClass:"container",attrs:{id:"container"}})])}],o=a(6198),l=a(3019),r=(a(1249),a(7327),a(1539),a(9600),a(8975),a(4665)),s={name:"WareHouseMain",data:function(){return{map:"",lang:"zh_cn",zoom:10,title:"",content:[],infoWindow:null,markers:[],scale:null,isScale:!1,toolBar:null,isToolBar:!1,overView:null,isoverView:!1,nowMapImg:{title:"",src:"",type:""},satellite:null,isOrdMap:!0,options:[{value:"全部类型",label:"全部类型"},{value:"固体物质火灾",label:"固体物质火灾"},{value:"液体物质火灾",label:"液体物质火灾"},{value:"气体火灾",label:"气体火灾"},{value:"金属火灾",label:"金属火灾"},{value:"带电火灾",label:"带电火灾"}],typevalue:"全部类型",newfireData:[]}},components:{},computed:(0,l.Z)({},(0,r.rn)(["fireData"])),mounted:function(){this.initMap(),this.addMarker()},created:function(){var e=this;return(0,o.Z)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log(e.fireData);case 1:case"end":return t.stop()}}),t)})))()},methods:{initMap:function(){this.map=new AMap.Map("container",{resizeEnable:!0,zoom:this.zoom,zooms:[7,30],center:[102.379164,27.853739],viewMode:"3D",lang:this.lang,mapStyle:"amap://styles/macaron",infoWindow:null}),this.scale=new AMap.Scale({visible:!1}),this.map.addControl(this.scale),this.toolBar=new AMap.ToolBar({visible:!1,position:{top:"110px",right:"40px"}}),this.map.addControl(this.toolBar)},toggleScale:function(){this.isScale?(this.isScale=!1,this.scale.hide()):(this.isScale=!0,this.scale.show())},toggleToolBar:function(){this.isToolBar?(this.isToolBar=!1,this.toolBar.hide()):(this.isToolBar=!0,this.toolBar.show())},addMarker:function(){var e=this;return(0,o.Z)(regeneratorRuntime.mark((function t(){var a,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(e.map.clearMap(),e.markers=[],e.newfireData=e.fireData.map((function(e){return(0,l.Z)((0,l.Z)({},e),{},{coordinate:[e.jing,e.wei]})})),a=[],a="全部类型"===e.typevalue?e.newfireData:e.newfireData.filter((function(t){return t.reason===e.typevalue})),n=function(t){var n=new AMap.Marker({map:e.map,position:a[t].coordinate,extData:a[t],icon:new AMap.Icon({image:"https://vkceyugu.cdn.bspapp.com/VKCEYUGU-ae070c7f-068d-4e5c-adf5-baf6760c9a2b/9e584737-de7e-48ec-8025-d6f822668e69.png",size:new AMap.Size(40,40),imageSize:new AMap.Size(40,40)})});e.markers.push(n),AMap.event.addListener(n,"click",(function(){e.title="火灾编号："+a[t].index,e.content=["火灾级别："+a[t].level,"救援队伍规模："+a[t].fmen,"起火原因："+a[t].reason],e.infoWindow=new AMap.InfoWindow({isCustom:!0,content:e.createInfoWindow(e.title,e.content.join("<br/>")),offset:new AMap.Pixel(16,-45)}),e.infoWindow.open(e.map,n.getPosition())}))},i=0;i<a.length;i++)n(i);case 7:case"end":return t.stop()}}),t)})))()},createInfoWindow:function(e,t){var a=document.createElement("div");a.className="custom-info input-card content-window-card";var n=document.createElement("div"),i=document.createElement("div"),o=document.createElement("img");n.className="info-top",i.innerHTML=e,o.src="https://webapi.amap.com/images/close2.gif",o.onclick=this.closeInfoWindow,n.appendChild(i),n.appendChild(o),a.appendChild(n);var l=document.createElement("div");l.className="info-middle",l.style.backgroundColor="white",l.innerHTML=t,a.appendChild(l);var r=document.createElement("div");r.className="info-bottom",r.style.position="relative",r.style.top="0px",r.style.margin="0 auto";var s=document.createElement("img");return s.src="https://webapi.amap.com/images/sharp.png",r.appendChild(s),a.appendChild(r),a},closeInfoWindow:function(){this.map.clearInfoWindow()},addRoadLayer:function(){this.isOrdMap=!1,this.satellite=new AMap.TileLayer.Satellite,this.map.add(this.satellite)},removeSatellite:function(){this.isOrdMap=!0,this.map.remove(this.satellite)},selectType:function(){this.addMarker()}}},c=s,p=a(1001),u=(0,p.Z)(c,n,i,!1,null,null,null),d=u.exports}}]);
//# sourceMappingURL=742-legacy.07e5b2c3.js.map